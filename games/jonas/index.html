<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>JonÃ¡s y la Ballena - HolyGame</title>

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap"
    rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Back Button -->
  <button id="back-btn" onclick="goBack()">â—€ VOLVER AL HUB</button>

  <!-- Game Container -->
  <div id="game-container">
    <canvas id="gameCanvas"></canvas>

    <!-- HUD -->
    <div id="hud">
      <div class="stat-item">
        <div>PuntuaciÃ³n</div>
        <div class="stat-value" id="score">0</div>
      </div>
      <div class="stat-item">
        <div>RÃ©cord</div>
        <div class="stat-value" id="high-score">0</div>
      </div>
    </div>

    <!-- Controls -->
    <div id="controls">
      <button class="control-btn" id="mute-btn" onclick="toggleMute()">ğŸ”Š Mute</button>
    </div>

    <!-- Touch Instruction (Mobile) -->
    <div class="touch-instruction" id="touch-hint">
      Toca para nadar â†‘
    </div>
  </div>

  <!-- Menu Overlay -->
  <div class="modal-overlay active" id="menu-overlay">
    <div class="modal-content">
      <h2>ğŸ‹ JONÃS Y LA BALLENA</h2>
      <p>Â¡Escapa por el ocÃ©ano esquivando obstÃ¡culos!</p>

      <div class="instructions">
        <p><strong>ğŸ® Controles:</strong></p>
        <p>â€¢ Presiona <strong>ESPACIO</strong> o <strong>CLIC</strong> para nadar hacia arriba</p>
        <p>â€¢ Evita los arrecifes de coral</p>
        <p>â€¢ Recoge peces ğŸŸ (+10 pts) y pergaminos ğŸ“œ (+50 pts)</p>
        <p>â€¢ Â¡La dificultad aumenta con el tiempo!</p>
      </div>

      <p style="margin-top: 20px;">
        <span class="high-score-badge">ğŸ† RÃ©cord: <span id="menu-high-score">0</span></span>
      </p>

      <button class="btn-primary" onclick="game.handleInput()">
        âš¡ COMENZAR JUEGO
      </button>
    </div>
  </div>

  <!-- Pause Overlay -->
  <div class="modal-overlay" id="pause-overlay">
    <div class="modal-content">
      <h2>â¸ï¸ PAUSADO</h2>
      <p>El juego estÃ¡ en pausa</p>

      <button class="btn-primary" onclick="game.togglePause()">
        â–¶ï¸ CONTINUAR
      </button>
      <button class="btn-secondary" onclick="goBack()">
        ğŸ  VOLVER AL MENÃš
      </button>
    </div>
  </div>

  <!-- Game Over Overlay -->
  <div class="modal-overlay" id="gameover-overlay">
    <div class="modal-content">
      <h2>ğŸ’€ GAME OVER</h2>

      <div id="new-high-score-badge" class="high-score-badge hidden">
        ğŸ‰ Â¡NUEVO RÃ‰CORD!
      </div>

      <p>PuntuaciÃ³n Final</p>
      <div class="score-big" id="final-score">0</div>

      <p style="margin-top: 20px;">
        Mejor PuntuaciÃ³n: <strong id="gameover-high-score">0</strong>
      </p>

      <button class="btn-primary" onclick="game.handleInput()">
        ğŸ”„ JUGAR DE NUEVO
      </button>
      <button class="btn-secondary" onclick="goBack()">
        ğŸ  VOLVER AL HUB
      </button>
    </div>
  </div>

  <!-- Game Scripts -->
  <script src="config.js?v=3"></script>
  <script src="audio.js?v=3"></script>
  <script src="entities.js?v=3"></script>
  <script src="game.js?v=3"></script>

  <script>
    // Hide touch instruction on desktop
    if (!('ontouchstart' in window)) {
      document.getElementById('touch-hint').style.display = 'none';
    }

    // Hide touch instruction after first interaction
    let interacted = false;
    document.addEventListener('click', () => {
      if (!interacted) {
        document.getElementById('touch-hint').classList.add('fade-out');
        interacted = true;
      }
    });
    document.addEventListener('touchstart', () => {
      if (!interacted) {
        document.getElementById('touch-hint').classList.add('fade-out');
        interacted = true;
      }
    });
  </script>
</body>

</html>